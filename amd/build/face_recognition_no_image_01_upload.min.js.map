{"version":3,"file":"face_recognition_no_image_01_upload.min.js","sources":["../src/face_recognition_no_image_01_upload.js"],"sourcesContent":["define(['jquery', 'core/templates', 'core/ajax', 'core/notification',\n'core/fragment', 'quizaccess_videocapture/face_recognition_client'],\n function($, Templates, ajax, Notification, Fragment, RC) {\n\n    //var uid = null;\n    //var usercontextid = null;\n\n\n    var loadForm = function(userid, usercontextid){\n        $('#formcontainer form').remove();\n        Fragment.loadFragment('quizaccess_videocapture', 'uploadform',usercontextid)\n        .then((frgmnt_html, frgmnt_js) =>{\n            Templates.appendNodeContents('#formcontainer', frgmnt_html, frgmnt_js);\n            $('.videocappreflight').css('height', '440px');\n            $('#sendpicture').off('click');\n            $('#sendpicture').on('click', (e) => {\n                e.preventDefault();\n                if($('input[name=\"newpicture\"]').attr('value') == ''){\n                    return;\n                }\n                $('.sectionnavbar').hide();\n                $('button[name=\"backbtn2\"]').hide();\n                var formData = $('#formcontainer form').serialize();\n\n                $('#formcontainer').hide();\n                $('#capturederror').hide();\n                $('.shot_container').hide();\n                $('#upldretry').hide();\n                $('#saveandlogin').hide();\n                $('.errmsg').hide();\n\n                $('input[name=\"submitbutton\"]').attr('disabled', 'disabled');\n                $('#fgroup_id_buttonar').show();\n                $('#capturedpicture').show();\n                $('.icon_container').show();\n                $('#capturedmessage').show();\n                RC.checkUploadedPicture(formData);\n            });\n            $('.sectionnavbar').show();\n        });\n    };\n\n\n    return{\n        init: function(userid, usercontextid){\n\n            //let uid = userid;\n            RC.setFlow('upload');\n            RC.setUid(userid);\n            RC.setPhotoTarget('photo_target');\n\n            loadForm(userid, usercontextid);\n            $('#fgroup_id_buttonar').hide();\n\n            $('#upldretry').on('click', () => {\n                RC.releaseStream();\n                $('#videocheck').hide();\n                $('#recogfailed').hide();\n                $('#capturedpicture').hide();\n\n                $('#formcontainer').hmtl = '';\n                $('#formcontainer').show();\n                loadForm(userid, usercontextid);\n            });\n\n            $('.bckbtn').on('click', function(){\n                RC.releaseStream();\n                $('.videocappreflight #container01').remove();\n                $('#container00').show();\n            });\n\n            $('button[name=\"saveandlogin\"]').on('click', function(e){\n                e.preventDefault();\n                $('#recogfailed').hide();\n                $('#svl-bio-err').show();\n                $('#svl-api-error').hide();\n                $('#videocheck').show();\n                $('#recogfailed').hide();\n                $('#recogsuccess').hide();\n                RC.startVideoCap('video', 'canvas', 'photo');\n            });\n\n            $('input[name=\"cancel\"]').on('click', () => {\n                $('.videocappreflight #container01').remove();\n                $('.preflighttitle').show();\n                $('#fitem_id_startvideocap').show();\n                $('.videocappreflight').hide();\n                $('input[name=\"submitbutton\"]').attr('disabled', 'disabled');\n                RC.releaseStream();\n            });\n\n            document.addEventListener('uploadedPictureCheckSuccess', () =>{\n                $('.icon_container').hide();\n                $('.shot_container').show();\n                $('#photo_target').show();\n                $('#slhelp').show();\n                $('#saveandlogin').show();\n                $('button[name=\"backbtn2\"]').show();\n\n            });\n\n            document.addEventListener('ploadedPictureCheckFailed', (e) =>{\n                $('#capturedmessage').hide();\n                if(e.detail.remote_error){\n                    $('#errormsg-BIO-API-ERR').show();\n                }else{\n                    $('#errormsg-'+e.detail.msgcod).show();\n                }\n                $('#capturederror').show();\n            });\n\n            document.addEventListener('saveandloginCheckSuccess', () =>{\n                $('#recogfailed').hide();\n                //$('#photo_target').hide();\n                $('.actionbtn').attr('disabled', true);\n                $('.pic_label').hide();\n                $('button[name=\"takepicture\"]').hide();\n                $('input[name=\"facematched\"]').attr('value', '1');\n                $('input[name=\"submitbutton\"]').removeAttr('disabled');\n                $('#recogloader').hide();\n                $('#recogsuccess').show();\n\n            });\n\n            document.addEventListener('saveandloginCheckFailed', (e) =>{\n                $('#recogsuccess').hide();\n                $('#recogloader').hide();\n                if(e.detail.remote_error){\n                    $('#svl-bio-err').hide();\n                    $('#svl-api-error').show();\n                }\n                $('#recogfailed').show();\n                $('button[name=\"saveandlogin\"]').show();\n            });\n\n            document.getElementById('video').addEventListener('canplay', function(){\n                $('#recogloader').show();\n            }, false);\n        }\n    };\n});"],"names":["define","$","Templates","ajax","Notification","Fragment","RC","loadForm","userid","usercontextid","remove","loadFragment","then","frgmnt_html","frgmnt_js","appendNodeContents","css","off","on","e","preventDefault","attr","hide","formData","serialize","show","checkUploadedPicture","init","setFlow","setUid","setPhotoTarget","releaseStream","hmtl","startVideoCap","document","addEventListener","detail","remote_error","msgcod","removeAttr","getElementById"],"mappings":"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"}