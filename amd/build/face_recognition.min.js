define("quizaccess_videocapture/face_recognition",["exports","jquery","core/modal_cancel","quizaccess_videocapture/face_recognition_client","core/templates","core/str"],(function(_exports,_jquery,_modal_cancel,_face_recognition_client,_templates,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Manage the face recognition process.
   *
   * @module     quizaccess_videocapture/face_recognition
   * @author     Alberto Villani <alberto.villani@abacotechnology.it>
   * @copyright  2022 Abaco Technology
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_modal_cancel=_interopRequireDefault(_modal_cancel),_face_recognition_client=_interopRequireDefault(_face_recognition_client),_templates=_interopRequireDefault(_templates);_exports.init=()=>{(0,_jquery.default)('input[name="cancel"]').on("click",(()=>{(0,_jquery.default)("#recogfailed").hide(),(0,_jquery.default)("#recogsuccess").hide(),(0,_jquery.default)("#recogloader").hide(),(0,_jquery.default)(".videocappreflight").hide(),(0,_jquery.default)('input[name="submitbutton"]').attr("disabled","disabled"),_face_recognition_client.default.releaseStream()})),(0,_jquery.default)('button[name="startvideocap"]').on("click",(function(){(0,_jquery.default)("#recogfailed").hide(),(0,_jquery.default)(".pic_container").show(),(0,_jquery.default)("#failedmessage").show(),(0,_jquery.default)("#failedmessage_api").hide(),(0,_jquery.default)("#recogsuccess").hide(),(0,_jquery.default)("#recogloader").hide(),(0,_jquery.default)(".videocappreflight").show(),null===_face_recognition_client.default.stream?_face_recognition_client.default.startVideoCap("video","canvas","photo"):((0,_jquery.default)("#recogloader").show(),_face_recognition_client.default.takepicture())})),(0,_jquery.default)("#abacoprivacylink").on("click",(function(e){e.preventDefault(),privacyModalFunction()})),document.addEventListener("snapshotCheckFailed",(e=>{(0,_jquery.default)('input[name="facematched"]').attr("value","0"),(0,_jquery.default)('input[name="submitbutton"]').attr("disabled","disabled"),(0,_jquery.default)("#recogsuccess").hide(),(0,_jquery.default)("#recogloader").hide(),(0,_jquery.default)("#recogfailed").show(),e.detail.remote_error&&((0,_jquery.default)(".pic_container").hide(),(0,_jquery.default)("#failedmessage").hide(),(0,_jquery.default)("#failedmessage_api").show())})),document.addEventListener("snapshotCheckSuccess",(()=>{(0,_jquery.default)('input[name="facematched"]').attr("value","1"),(0,_jquery.default)('input[name="submitbutton"]').removeAttr("disabled"),(0,_jquery.default)("#recogfailed").hide(),(0,_jquery.default)("#recogloader").hide(),(0,_jquery.default)("#recogsuccess").show()})),document.getElementById("video").addEventListener("canplay",(()=>{(0,_jquery.default)("#recogloader").show()}))};const privacyModalFunction=async()=>{(await _modal_cancel.default.create({title:(0,_str.getString)("abacoprivacytitle","quizaccess_videocapture"),body:_templates.default.render("quizaccess_videocapture/modal_privacy_body")})).show()}}));

//# sourceMappingURL=face_recognition.min.js.map